diff --git a/lightrag/lightrag.py b/lightrag/lightrag.py
--- a/lightrag/lightrag.py
+++ b/lightrag/lightrag.py
@@ -XXX,7 +XXX,11 @@
                         "latest_message": "",
                     }
                 )
-                # Cleaning history_messages without breaking it as a shared list object
-                del pipeline_status["history_messages"][:]
+                # Cleaning history_messages without breaking it as a shared list object
+                # Fix: Check if key exists before deleting to prevent KeyError
+                if "history_messages" in pipeline_status:
+                    del pipeline_status["history_messages"][:]
+                else:
+                    pipeline_status["history_messages"] = []
             else:
                 # Another process is busy, just set request flag and return
                 pipeline_status["request_pending"] = True
